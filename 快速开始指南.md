# TradingAgents å¿«é€Ÿå¼€å§‹æŒ‡å—

<p align="center">
  <img src="assets/TauricResearch.png" style="width: 60%; height: auto;">
</p>

## é¡¹ç›®ç®€ä»‹

TradingAgents æ˜¯ä¸€ä¸ªå¤šæ™ºèƒ½ä½“é‡‘èäº¤æ˜“æ¡†æ¶ï¼Œé€šè¿‡éƒ¨ç½²ä¸“ä¸šçš„ LLM é©±åŠ¨æ™ºèƒ½ä½“ï¼ˆåŸºæœ¬é¢åˆ†æå¸ˆã€æƒ…ç»ªä¸“å®¶ã€æŠ€æœ¯åˆ†æå¸ˆã€äº¤æ˜“å‘˜ã€é£é™©ç®¡ç†å›¢é˜Ÿç­‰ï¼‰æ¥åä½œè¯„ä¼°å¸‚åœºæ¡ä»¶å¹¶åšå‡ºäº¤æ˜“å†³ç­–ã€‚

## ç³»ç»Ÿè¦æ±‚

- Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- æ“ä½œç³»ç»Ÿï¼šmacOSã€Linux æˆ– Windows
- å†…å­˜ï¼šå»ºè®® 8GB ä»¥ä¸Š
- ç½‘ç»œï¼šç¨³å®šçš„äº’è”ç½‘è¿æ¥ï¼ˆç”¨äº API è°ƒç”¨ï¼‰

## å¿«é€Ÿå®‰è£…

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/TauricResearch/TradingAgents.git
cd TradingAgents
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# ä½¿ç”¨ micromambaï¼ˆæ¨èï¼Œæ›´å¿«æ›´è½»é‡ï¼‰
micromamba create -n tradingagents python=3.13
micromamba activate tradingagents

# æˆ–ä½¿ç”¨ conda
conda create -n tradingagents python=3.13
conda activate tradingagents

# æˆ–ä½¿ç”¨é¡¹ç›®è‡ªå¸¦çš„ venvï¼ˆå¦‚æœæ‚¨æƒ³ä½¿ç”¨ç°æœ‰çš„ myvenvï¼‰
source myvenv/bin/activate  # macOS/Linux
# myvenv\Scripts\activate  # Windows

# æˆ–åˆ›å»ºæ–°çš„ venv
python -m venv tradingagents_env
source tradingagents_env/bin/activate  # macOS/Linux
```

> **æç¤º**ï¼šå¦‚æœæ‚¨å·²ç»æœ‰è‚¡ç¥¨åˆ†æç›¸å…³çš„ç¯å¢ƒï¼ˆå¦‚ stock-niubiã€stock-scan ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨ç°æœ‰ç¯å¢ƒä¸­å®‰è£… TradingAgents çš„ä¾èµ–ã€‚

### 3. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

## API é…ç½®

### å¿…éœ€çš„ API å¯†é’¥

1. **FinnHub API**ï¼ˆé‡‘èæ•°æ®ï¼Œå…è´¹ç‰ˆæœ¬å³å¯ï¼‰
```bash
export FINNHUB_API_KEY=your_finnhub_api_key
```

2. **OpenAI API**ï¼ˆæ™ºèƒ½ä½“æ¨ç†ï¼‰
```bash
export OPENAI_API_KEY=your_openai_api_key
```

### å¯é€‰çš„ API å¯†é’¥

- **Google Gemini API**ï¼ˆæ›¿ä»£ OpenAIï¼‰
```bash
export GOOGLE_API_KEY=your_google_api_key
```

- **Anthropic Claude API**ï¼ˆæ›¿ä»£ OpenAIï¼‰
```bash
export ANTHROPIC_API_KEY=your_anthropic_api_key
```

## ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ä¸€ï¼šå‘½ä»¤è¡Œç•Œé¢ï¼ˆæ¨èæ–°æ‰‹ï¼‰

å¯åŠ¨äº¤äº’å¼ CLIï¼š

```bash
python -m cli.main
```

CLI å°†å¼•å¯¼æ‚¨å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š
1. **é€‰æ‹©è‚¡ç¥¨ä»£ç **ï¼šè¾“å…¥è¦åˆ†æçš„è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ NVDAã€AAPLã€SPYï¼‰
2. **è®¾ç½®åˆ†ææ—¥æœŸ**ï¼šé€‰æ‹©åˆ†æçš„ç›®æ ‡æ—¥æœŸ
3. **é€‰æ‹©åˆ†æå¸ˆå›¢é˜Ÿ**ï¼šé€‰æ‹©è¦ä½¿ç”¨çš„æ™ºèƒ½ä½“åˆ†æå¸ˆ
4. **è®¾ç½®ç ”ç©¶æ·±åº¦**ï¼šé€‰æ‹©åˆ†æçš„è¯¦ç»†ç¨‹åº¦
5. **é€‰æ‹© LLM æä¾›å•†**ï¼šé€‰æ‹© OpenAIã€Google æˆ– Anthropic
6. **é…ç½®æ€è€ƒæ¨¡å‹**ï¼šé€‰æ‹©æ·±åº¦æ€è€ƒå’Œå¿«é€Ÿæ€è€ƒæ¨¡å‹

### æ–¹å¼äºŒï¼šPython ä»£ç è°ƒç”¨

#### åŸºç¡€ä½¿ç”¨

```python
from tradingagents.graph.trading_graph import TradingAgentsGraph
from tradingagents.default_config import DEFAULT_CONFIG

# ä½¿ç”¨é»˜è®¤é…ç½®
ta = TradingAgentsGraph(debug=True, config=DEFAULT_CONFIG.copy())

# åˆ†æè‚¡ç¥¨å¹¶è·å–å†³ç­–
_, decision = ta.propagate("NVDA", "2024-05-10")
print(decision)
```

#### è‡ªå®šä¹‰é…ç½®

```python
from tradingagents.graph.trading_graph import TradingAgentsGraph
from tradingagents.default_config import DEFAULT_CONFIG

# åˆ›å»ºè‡ªå®šä¹‰é…ç½®
config = DEFAULT_CONFIG.copy()
config["llm_provider"] = "google"  # ä½¿ç”¨ Google Gemini
config["deep_think_llm"] = "gemini-2.0-flash"
config["quick_think_llm"] = "gemini-2.0-flash"
config["max_debate_rounds"] = 2  # å¢åŠ è¾©è®ºè½®æ•°
config["online_tools"] = True  # ä½¿ç”¨åœ¨çº¿å·¥å…·è·å–å®æ—¶æ•°æ®

# åˆå§‹åŒ–å¹¶è¿è¡Œ
ta = TradingAgentsGraph(debug=True, config=config)
_, decision = ta.propagate("AAPL", "2024-06-01")
print(decision)
```

## æ™ºèƒ½ä½“å·¥ä½œæµç¨‹

TradingAgents é‡‡ç”¨äº”é˜¶æ®µåˆ†ææµç¨‹ï¼š

### I. åˆ†æå¸ˆå›¢é˜Ÿ
- **å¸‚åœºåˆ†æå¸ˆ**ï¼šè¯„ä¼°æ•´ä½“å¸‚åœºè¶‹åŠ¿å’ŒæŠ€æœ¯æŒ‡æ ‡
- **æƒ…ç»ªåˆ†æå¸ˆ**ï¼šåˆ†æç¤¾äº¤åª’ä½“å’Œå…¬ä¼—æƒ…ç»ª
- **æ–°é—»åˆ†æå¸ˆ**ï¼šç›‘æ§å…¨çƒæ–°é—»å’Œå®è§‚ç»æµæŒ‡æ ‡
- **åŸºæœ¬é¢åˆ†æå¸ˆ**ï¼šè¯„ä¼°å…¬å¸è´¢åŠ¡å’Œä¸šç»©æŒ‡æ ‡

### II. ç ”ç©¶å›¢é˜Ÿ
- **çœ‹æ¶¨ç ”ç©¶å‘˜**ï¼šæä¾›ä¹è§‚çš„æŠ•èµ„è§‚ç‚¹
- **çœ‹è·Œç ”ç©¶å‘˜**ï¼šæä¾›è°¨æ…çš„é£é™©è¯„ä¼°
- **ç ”ç©¶ç»ç†**ï¼šç»¼åˆåŒæ–¹è§‚ç‚¹åšå‡ºå¹³è¡¡å†³ç­–

### III. äº¤æ˜“å›¢é˜Ÿ
- **äº¤æ˜“å‘˜**ï¼šåŸºäºåˆ†æç»“æœåˆ¶å®šå…·ä½“äº¤æ˜“ç­–ç•¥

### IV. é£é™©ç®¡ç†å›¢é˜Ÿ
- **æ¿€è¿›åˆ†æå¸ˆ**ï¼šè¯„ä¼°é«˜æ”¶ç›Šæœºä¼š
- **ä¿å®ˆåˆ†æå¸ˆ**ï¼šå…³æ³¨é£é™©æ§åˆ¶
- **ä¸­æ€§åˆ†æå¸ˆ**ï¼šæä¾›å¹³è¡¡è§‚ç‚¹

### V. æŠ•èµ„ç»„åˆç®¡ç†
- **æŠ•èµ„ç»„åˆç»ç†**ï¼šæœ€ç»ˆæ‰¹å‡†æˆ–æ‹’ç»äº¤æ˜“ææ¡ˆ

## æ”¯æŒçš„æ•°æ®æº

### å›½é™…å¸‚åœº
- **Yahoo Finance**ï¼šç¾è‚¡ã€æ¸¯è‚¡ç­‰å›½é™…å¸‚åœºæ•°æ®
- **FinnHub**ï¼šä¸“ä¸šé‡‘èæ•°æ® API
- **EODHD**ï¼šå†å²å’Œå®æ—¶å¸‚åœºæ•°æ®

### ä¸­å›½ A è‚¡å¸‚åœº
- **AKShare**ï¼šå…è´¹çš„ä¸­å›½é‡‘èæ•°æ®æ¥å£
- **Tushare**ï¼šä¸“ä¸šçš„ä¸­å›½è‚¡ç¥¨æ•°æ®å¹³å°

#### A è‚¡ä½¿ç”¨ç¤ºä¾‹

```python
# åˆ†æ A è‚¡è‚¡ç¥¨
config = DEFAULT_CONFIG.copy()
config["online_tools"] = True

ta = TradingAgentsGraph(debug=True, config=config)
# ä½¿ç”¨ A è‚¡ä»£ç æ ¼å¼
_, decision = ta.propagate("000001.SZ", "2024-06-01")  # å¹³å®‰é“¶è¡Œ
print(decision)
```

## é…ç½®é€‰é¡¹

### ä¸»è¦é…ç½®å‚æ•°

```python
DEFAULT_CONFIG = {
    # LLM è®¾ç½®
    "llm_provider": "openai",           # openai, google, anthropic
    "deep_think_llm": "o4-mini",        # æ·±åº¦æ€è€ƒæ¨¡å‹
    "quick_think_llm": "gpt-4o-mini",   # å¿«é€Ÿæ€è€ƒæ¨¡å‹
    "backend_url": "https://api.openai.com/v1",
    
    # è¾©è®ºå’Œè®¨è®ºè®¾ç½®
    "max_debate_rounds": 1,             # ç ”ç©¶å›¢é˜Ÿè¾©è®ºè½®æ•°
    "max_risk_discuss_rounds": 1,       # é£é™©ç®¡ç†è®¨è®ºè½®æ•°
    
    # å·¥å…·è®¾ç½®
    "online_tools": True,               # æ˜¯å¦ä½¿ç”¨åœ¨çº¿æ•°æ®
    
    # ç›®å½•è®¾ç½®
    "results_dir": "./results",         # ç»“æœä¿å­˜ç›®å½•
}
```

### æ¨¡å‹é€‰æ‹©å»ºè®®

#### æˆæœ¬ä¼˜åŒ–ï¼ˆæµ‹è¯•ç”¨ï¼‰
```python
config["deep_think_llm"] = "gpt-4o-mini"
config["quick_think_llm"] = "gpt-4o-mini"
```

#### æ€§èƒ½ä¼˜åŒ–ï¼ˆç”Ÿäº§ç”¨ï¼‰
```python
config["deep_think_llm"] = "o1-preview"
config["quick_think_llm"] = "gpt-4o"
```

#### ä½¿ç”¨ Google Gemini
```python
config["llm_provider"] = "google"
config["deep_think_llm"] = "gemini-2.0-flash"
config["quick_think_llm"] = "gemini-2.0-flash"
```

## ç»“æœè¾“å‡º

### CLI è¾“å‡º
- å®æ—¶æ˜¾ç¤ºå„æ™ºèƒ½ä½“çš„å·¥ä½œè¿›åº¦
- åˆ†é˜¶æ®µå±•ç¤ºåˆ†ææŠ¥å‘Š
- æœ€ç»ˆäº¤æ˜“å†³ç­–å’Œé£é™©è¯„ä¼°

### æ–‡ä»¶è¾“å‡º
åˆ†æç»“æœä¿å­˜åœ¨ `results/` ç›®å½•ä¸‹ï¼š
```
results/
â”œâ”€â”€ NVDA/
â”‚   â””â”€â”€ 2024-05-10/
â”‚       â”œâ”€â”€ reports/
â”‚       â”‚   â”œâ”€â”€ market_report.md
â”‚       â”‚   â”œâ”€â”€ sentiment_report.md
â”‚       â”‚   â”œâ”€â”€ news_report.md
â”‚       â”‚   â””â”€â”€ fundamentals_report.md
â”‚       â””â”€â”€ message_tool.log
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é™ä½ API æˆæœ¬ï¼Ÿ
A: ä½¿ç”¨è¾ƒå°çš„æ¨¡å‹ï¼ˆå¦‚ gpt-4o-miniï¼‰å¹¶å‡å°‘è¾©è®ºè½®æ•°ï¼š
```python
config["deep_think_llm"] = "gpt-4o-mini"
config["quick_think_llm"] = "gpt-4o-mini"
config["max_debate_rounds"] = 1
```

### Q: å¦‚ä½•åˆ†æä¸­å›½ A è‚¡ï¼Ÿ
A: ç¡®ä¿å®‰è£…äº† akshare æˆ– tushareï¼Œç„¶åä½¿ç”¨æ­£ç¡®çš„è‚¡ç¥¨ä»£ç æ ¼å¼ï¼š
```python
# A è‚¡ä»£ç æ ¼å¼ï¼š6ä½æ•°å­—.SZ æˆ– .SH
_, decision = ta.propagate("000001.SZ", "2024-06-01")
```

### Q: å¦‚ä½•æé«˜åˆ†æè´¨é‡ï¼Ÿ
A: å¢åŠ è¾©è®ºè½®æ•°å’Œä½¿ç”¨æ›´å¼ºçš„æ¨¡å‹ï¼š
```python
config["max_debate_rounds"] = 3
config["max_risk_discuss_rounds"] = 2
config["deep_think_llm"] = "o1-preview"
```

### Q: å¦‚ä½•ä½¿ç”¨ç¦»çº¿æ•°æ®ï¼Ÿ
A: è®¾ç½® `online_tools` ä¸º Falseï¼š
```python
config["online_tools"] = False  # ä½¿ç”¨ç¼“å­˜çš„ TradingDB æ•°æ®
```

## è¿›é˜¶ä½¿ç”¨

### æ‰¹é‡åˆ†æ
```python
stocks = ["AAPL", "GOOGL", "MSFT", "NVDA"]
results = {}

for stock in stocks:
    _, decision = ta.propagate(stock, "2024-06-01")
    results[stock] = decision
    
print(results)
```

### è‡ªå®šä¹‰åˆ†æå¸ˆ
```python
# é€‰æ‹©ç‰¹å®šçš„åˆ†æå¸ˆç±»å‹
selected_analysts = ["market", "fundamentals", "news"]
ta = TradingAgentsGraph(selected_analysts, config=config, debug=True)
```

### åæ€å’Œå­¦ä¹ 
```python
# åŸºäºäº¤æ˜“ç»“æœè¿›è¡Œåæ€å’Œæ”¹è¿›
position_returns = 1000  # å‡è®¾æ”¶ç›Š
ta.reflect_and_remember(position_returns)
```

### ç¯å¢ƒç®¡ç†æœ€ä½³å®è·µ

å¦‚æœæ‚¨å·²ç»æœ‰å¤šä¸ªè‚¡ç¥¨åˆ†æç¯å¢ƒï¼Œå»ºè®®ï¼š

```bash
# æŸ¥çœ‹ç°æœ‰ç¯å¢ƒ
micromamba env list

# åœ¨ç°æœ‰ç¯å¢ƒä¸­å®‰è£…ï¼ˆå¦‚ stock-niubi ç¯å¢ƒï¼‰
micromamba activate stock-niubi
pip install -r requirements.txt

# æˆ–è€…åˆ›å»ºä¸“é—¨çš„ TradingAgents ç¯å¢ƒ
micromamba create -n tradingagents python=3.11 -c conda-forge
micromamba activate tradingagents
```

### æ€§èƒ½ä¼˜åŒ–é…ç½®

é’ˆå¯¹æœ‰ç»éªŒçš„ç”¨æˆ·ï¼Œæ¨èä»¥ä¸‹é…ç½®ï¼š

```python
# é«˜æ€§èƒ½é…ç½®
config = DEFAULT_CONFIG.copy()
config.update({
    "llm_provider": "openai",
    "deep_think_llm": "o1-preview",      # æœ€å¼ºæ¨ç†èƒ½åŠ›
    "quick_think_llm": "gpt-4o",         # å¹³è¡¡é€Ÿåº¦å’Œè´¨é‡
    "max_debate_rounds": 3,              # å¢åŠ è¾©è®ºæ·±åº¦
    "max_risk_discuss_rounds": 2,        # é£é™©è¯„ä¼°è½®æ•°
    "online_tools": True,                # å®æ—¶æ•°æ®
    "max_recur_limit": 150,              # å¢åŠ é€’å½’é™åˆ¶
})

# æˆæœ¬ä¼˜åŒ–é…ç½®ï¼ˆé€‚åˆæµ‹è¯•ï¼‰
config_lite = DEFAULT_CONFIG.copy()
config_lite.update({
    "llm_provider": "google",
    "deep_think_llm": "gemini-2.0-flash",
    "quick_think_llm": "gemini-2.0-flash",
    "max_debate_rounds": 1,
    "max_risk_discuss_rounds": 1,
})
```

## ç¤¾åŒºå’Œæ”¯æŒ

- **GitHub**: [TauricResearch/TradingAgents](https://github.com/TauricResearch/TradingAgents)
- **Discord**: [TradingResearch ç¤¾åŒº](https://discord.com/invite/hk9PGKShPK)
- **è®ºæ–‡**: [arXiv:2412.20138](https://arxiv.org/abs/2412.20138)
- **å¾®ä¿¡ç¾¤**: æ‰«æé¡¹ç›®ä¸­çš„äºŒç»´ç åŠ å…¥

## å…è´£å£°æ˜

âš ï¸ **é‡è¦æé†’**ï¼šTradingAgents æ¡†æ¶ä»…ç”¨äºç ”ç©¶ç›®çš„ã€‚äº¤æ˜“è¡¨ç°å¯èƒ½å› å¤šç§å› ç´ è€Œå¼‚ï¼ŒåŒ…æ‹¬æ‰€é€‰çš„è¯­è¨€æ¨¡å‹ã€æ¨¡å‹æ¸©åº¦ã€äº¤æ˜“å‘¨æœŸã€æ•°æ®è´¨é‡å’Œå…¶ä»–éç¡®å®šæ€§å› ç´ ã€‚æœ¬æ¡†æ¶ä¸æ„æˆè´¢åŠ¡ã€æŠ•èµ„æˆ–äº¤æ˜“å»ºè®®ã€‚

## ä¸‹ä¸€æ­¥

1. å°è¯•ä½¿ç”¨ CLI åˆ†ææ‚¨æ„Ÿå…´è¶£çš„è‚¡ç¥¨
2. é˜…è¯»é¡¹ç›®æ–‡æ¡£äº†è§£æ›´å¤šé«˜çº§åŠŸèƒ½
3. åŠ å…¥ç¤¾åŒºè®¨è®ºå’Œåˆ†äº«ç»éªŒ
4. è€ƒè™‘ä¸ºé¡¹ç›®è´¡çŒ®ä»£ç æˆ–åé¦ˆ

å¼€å§‹æ‚¨çš„æ™ºèƒ½äº¤æ˜“åˆ†æä¹‹æ—…å§ï¼ğŸš€